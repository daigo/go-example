Example Go language project
==========

A project to demonstrate my go project structure and Makefile setup

Can utilize [axw/ocov](https://github.com/axw/gocov) together with [matm/gocov-html](https://github.com/matm/gocov-html) for pretty code coverage testing.

Usage
====

Structure the code into more smaller packages, nested as far as you want.

Place main packages into files in the _cmd_ directory.

Commands
====

* make fmt - Formats the source code
* make test - Runs go test on your packges
* make bench - Runs the tests with benchmarking enabled
* make cov - Gives you a code coverage reports (requires gocov)
* make clean - Removes any non-source files generated by the Makefile in the project
* make cov-html - Gives you nice html with code coverage (requires gocov and gocov-html)
* make install - Installs all your library packages into $GOROOT/pkg for faster compilation
* make exe - Runs the executable go file cmd/exe.go
* make build - Builds all the executables under ./cmd and places them in ./bin
* make godoc - Zips up your code and launches a godoc webserver where you can browse documentation

Configuration
====

The only configuration needed is the two topmost variables in the Makefile
```
ROOT_PKG	:= github.com/silven/go-example
PACKAGES 	:= common common/sub
```
The first one is the root, and the second lists the subpackages with go code. Leave out ./cmd

Cross Compilation
====

If you have used [davecheney/golang-crosscompile](https://github.com/davecheney/golang-crosscompile) You can cross compile using the Makefile by setting the GOOS and GOARCH before running make.
```
GOOS=windows GOARCH=386 make build
```
*This feature is not very well tested, but I think it should work*
